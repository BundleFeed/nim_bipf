/* Generated by Nim Compiler v1.9.3 */
#define NIM_INTBITS 64

#include "nimbase.h"
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <fcntl.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(x, y)
#define nimln_(x, y)
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g;
typedef struct tyObject_CatchableError__9cyZ9aPQenU9bm4gpwSRVmfsA tyObject_CatchableError__9cyZ9aPQenU9bm4gpwSRVmfsA;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct tySequence__9bNRJkU9cJnNkESCDTQ7DgcQ tySequence__9bNRJkU9cJnNkESCDTQ7DgcQ;
typedef struct tySequence__9bNRJkU9cJnNkESCDTQ7DgcQ_Content tySequence__9bNRJkU9cJnNkESCDTQ7DgcQ_Content;
typedef struct tyObject_StackTraceEntry__2Xjg6E7TZG7p9bcgUNTKHrg tyObject_StackTraceEntry__2Xjg6E7TZG7p9bcgUNTKHrg;
struct NimStrPayload {
NI cap;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
NI len;
NimStrPayload* p;
};
struct TNimTypeV2 {
void* destructor;
NI size;
NI16 align;
NI16 depth;
NU32* display;
void* traceImpl;
void* typeInfoV1;
NI flags;
};
struct RootObj {
TNimTypeV2* m_type;
};
struct tySequence__9bNRJkU9cJnNkESCDTQ7DgcQ {
  NI len; tySequence__9bNRJkU9cJnNkESCDTQ7DgcQ_Content* p;
};
struct Exception {
  RootObj Sup;
Exception* parent;
NCSTRING name;
NimStringV2 message;
tySequence__9bNRJkU9cJnNkESCDTQ7DgcQ trace;
Exception* up;
};
struct tyObject_CatchableError__9cyZ9aPQenU9bm4gpwSRVmfsA {
  Exception Sup;
};
struct tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g {
  tyObject_CatchableError__9cyZ9aPQenU9bm4gpwSRVmfsA Sup;
};
typedef NU8 tyEnum_FileMode__39bFZoYF4P1fKMLJ1ev9ch1Q;
typedef NCSTRING tyArray__6R9aOWNxXvSAuhFHMR61sqA[5];
struct tyObject_StackTraceEntry__2Xjg6E7TZG7p9bcgUNTKHrg {
NCSTRING procname;
NI line;
NCSTRING filename;
};


#ifndef tySequence__9bNRJkU9cJnNkESCDTQ7DgcQ_Content_PP
#define tySequence__9bNRJkU9cJnNkESCDTQ7DgcQ_Content_PP
struct tySequence__9bNRJkU9cJnNkESCDTQ7DgcQ_Content { NI cap; tyObject_StackTraceEntry__2Xjg6E7TZG7p9bcgUNTKHrg data[SEQ_DECL_SIZE];};
#endif

      N_LIB_PRIVATE N_NIMCALL(NI, writeBuffer__stdZsyncio_186)(FILE* f__cJWivIckzpinZ1YWo3Qqyg, void* buffer__pICOptuDPArjVoUUIC2kHg, NI len__wcp55NDbfNN8cddTUpcVZQ);
N_LIB_PRIVATE N_NIMCALL(void, checkErr__stdZsyncio_152)(FILE* f__yB8Flv3tUANNgmilZp29ajA);
static N_INLINE(void, appendString)(NimStringV2* dest__Ws6Yi19bfxrbjCy9a9brzRV7A, NimStringV2 src__369aqaoei6FUsRf9cDAsKQ2g);
static N_INLINE(void, copyMem__system_1752)(void* dest__fJYjxXM6yYjbZ9agQpPnNNA, void* source__Y6ZnHEKiVLswf16AMGuQUA, NI size__YLlwRG7Z9bTiXmiSwU9cUHeA);
static N_INLINE(void, nimCopyMem)(void* dest__HMDJtGX4ficduS9cTUiey0w, void* source__xDZEU1SRcEBuZ8mtbKQBhQ, NI size__9b8g0WMA1h1RvMwHOMW7yFA);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___systemZdollars_8)(NI x__KsYCTjO9co8rDpst8JJ2TVg);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, cstrToNimstr)(NCSTRING str__1hBypH3GHj7R9aGZBu1HZPg);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space__9cQ1OhOryhnk7At3WzUsjtA);
N_LIB_PRIVATE N_NOINLINE(void, raiseEIO__stdZsyncio_94)(NimStringV2 msg__qNjdqtYov6QtAnm1n9aId6w);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size__LZn6dneMVUSD9cVJcoc7Slw, NI alignment__eu9b1Xf7SGvOM5v8REyXVWA);
N_LIB_PRIVATE N_NIMCALL(void, eqwasMoved___stdZassertions_27)(NimStringV2* dest__xec9cV0q9axJ6L2MXVF0gK2A);
N_LIB_PRIVATE N_NIMCALL(void, raiseExceptionEx)(Exception* e__9ajCQKqHfiAQicU4Xo4XCfQ, NCSTRING ename__dYYaKlNlIXrIQDE0zrUqCg, NCSTRING procname__0KbbVdUBSy9cVZFkcqkrAbA, NCSTRING filename__OtHzFRym9aG7oNwlVo9bTRVA, NI line__eII5zX9cu2R26e0hzCzdeKQ);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___stdZassertions_30)(NimStringV2* dest__C2JKGPCNdWKCPrsQvNywTQ);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s__UF7MRy5Ww0D3yXFWtooEkw);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, open__stdZsyncio_401)(FILE** f__jCZmwmLDt13jv0XqrjcAuQ, NimStringV2 filename__Pf9bBf8k7d9b5DaEF1XeGdbQ, tyEnum_FileMode__39bFZoYF4P1fKMLJ1ev9ch1Q mode__7zsiDlzniTpJK1bQl48ucw, NI bufSize__zibzux2ygo9c1EC9aWjJNryA);
N_LIB_PRIVATE N_NIMCALL(int, getFileHandle__stdZsyncio_262)(FILE* f__ZqUB4siyMgDrluwd9b9abRmw);
N_LIB_PRIVATE N_NIMCALL(void, close__stdZsyncio_251)(FILE* f__CEDjtcBHJC7q5ThfPqiUSQ);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, setInheritable__stdZsyncio_268)(int f__BAsdBRGaSrHINOGMBpuw1Q, NIM_BOOL inheritable__X9amEySujjlF1I85QDZj2ZQ);
N_LIB_PRIVATE N_NIMCALL(int, getOsFileHandle__stdZsyncio_265)(FILE* f__NN7lHNKcyKqwPXOE59bvcKw);
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_2 = { 7 | NIM_STRLIT_FLAG, "errno: " };
static const NimStringV2 TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_3 = {7, (NimStrPayload*)&TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_2};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_4 = { 2 | NIM_STRLIT_FLAG, " `" };
static const NimStringV2 TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_5 = {2, (NimStrPayload*)&TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_4};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_6 = { 1 | NIM_STRLIT_FLAG, "`" };
static const NimStringV2 TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_7 = {1, (NimStrPayload*)&TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_6};
extern TNimTypeV2 NTIv2__Y9cmhKqJtX29a179a1ftM9cx2g_;
static const struct {
  NI cap; NIM_CHAR data[27+1];
} TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_8 = { 27 | NIM_STRLIT_FLAG, "cannot write string to file" };
static const NimStringV2 TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_9 = {27, (NimStrPayload*)&TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_8};
static const struct {
  NI cap; NIM_CHAR data[13+1];
} TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_10 = { 13 | NIM_STRLIT_FLAG, "cannot open: " };
static const NimStringV2 TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_11 = {13, (NimStrPayload*)&TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_10};
N_LIB_PRIVATE NIM_CONST tyArray__6R9aOWNxXvSAuhFHMR61sqA FormatOpen__stdZsyncio_392 = {"rb",
"wb",
"w+b",
"r+b",
"ab"}
;
extern NIM_THREADVAR NIM_BOOL nimInErrorMode__system_4297;
static N_INLINE(void, nimCopyMem)(void* dest__HMDJtGX4ficduS9cTUiey0w, void* source__xDZEU1SRcEBuZ8mtbKQBhQ, NI size__9b8g0WMA1h1RvMwHOMW7yFA) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest__HMDJtGX4ficduS9cTUiey0w, source__xDZEU1SRcEBuZ8mtbKQBhQ, ((size_t) (size__9b8g0WMA1h1RvMwHOMW7yFA)));
}
static N_INLINE(void, copyMem__system_1752)(void* dest__fJYjxXM6yYjbZ9agQpPnNNA, void* source__Y6ZnHEKiVLswf16AMGuQUA, NI size__YLlwRG7Z9bTiXmiSwU9cUHeA) {
	nimCopyMem(dest__fJYjxXM6yYjbZ9agQpPnNNA, source__Y6ZnHEKiVLswf16AMGuQUA, size__YLlwRG7Z9bTiXmiSwU9cUHeA);
}
static N_INLINE(void, appendString)(NimStringV2* dest__Ws6Yi19bfxrbjCy9a9brzRV7A, NimStringV2 src__369aqaoei6FUsRf9cDAsKQ2g) {
	{
		if (!(((NI)0) < src__369aqaoei6FUsRf9cDAsKQ2g.len)) goto LA3_;
		copyMem__system_1752(((void*) ((&(*(*dest__Ws6Yi19bfxrbjCy9a9brzRV7A).p).data[(*dest__Ws6Yi19bfxrbjCy9a9brzRV7A).len]))), ((void*) ((&(*src__369aqaoei6FUsRf9cDAsKQ2g.p).data[((NI)0)]))), ((NI) ((NI)(src__369aqaoei6FUsRf9cDAsKQ2g.len + ((NI)1)))));
		(*dest__Ws6Yi19bfxrbjCy9a9brzRV7A).len += src__369aqaoei6FUsRf9cDAsKQ2g.len;
	}
	LA3_: ;
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__system_4297);
	return result;
}
N_LIB_PRIVATE N_NOINLINE(void, raiseEIO__stdZsyncio_94)(NimStringV2 msg__qNjdqtYov6QtAnm1n9aId6w) {
	tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g* T2_;
	NimStringV2 blitTmp;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	T2_ = NIM_NIL;
	T2_ = (tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g*) nimNewObj(sizeof(tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g), NIM_ALIGNOF(tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g));
	(*T2_).Sup.Sup.Sup.m_type = (&NTIv2__Y9cmhKqJtX29a179a1ftM9cx2g_);
	(*T2_).Sup.Sup.name = "IOError";
	blitTmp = msg__qNjdqtYov6QtAnm1n9aId6w;
	eqwasMoved___stdZassertions_27((&msg__qNjdqtYov6QtAnm1n9aId6w));
	(*T2_).Sup.Sup.message = blitTmp;
	(*T2_).Sup.Sup.parent = ((Exception*) NIM_NIL);
	raiseExceptionEx((Exception*)T2_, "IOError", "raiseEIO", "syncio.nim", 158);
goto LA1_;
	{
		LA1_:;
	}
	{
		eqdestroy___stdZassertions_30((&msg__qNjdqtYov6QtAnm1n9aId6w));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, checkErr__stdZsyncio_152)(FILE* f__yB8Flv3tUANNgmilZp29ajA) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		int T3_;
		NimStringV2 msg;
		NimStringV2 colontmpD_;
		NimStringV2 colontmpD__2;
		NimStringV2 T7_;
		NCSTRING T8_;
		NimStringV2 blitTmp;
		T3_ = (int)0;
		T3_ = ferror(f__yB8Flv3tUANNgmilZp29ajA);
		if (!!((T3_ == ((NI32)0)))) goto LA4_;
		msg.len = 0; msg.p = NIM_NIL;
		colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
		colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
		T7_.len = 0; T7_.p = NIM_NIL;
		colontmpD_ = dollar___systemZdollars_8(((NI) (errno)));
		if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
		T8_ = (NCSTRING)0;
		T8_ = strerror(errno);
		colontmpD__2 = cstrToNimstr(T8_);
		T7_ = rawNewString(colontmpD_.len + colontmpD__2.len + 10);
appendString((&T7_), TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_3);
appendString((&T7_), colontmpD_);
appendString((&T7_), TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_5);
appendString((&T7_), colontmpD__2);
appendString((&T7_), TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_7);
		msg = T7_;
		clearerr(f__yB8Flv3tUANNgmilZp29ajA);
		blitTmp = msg;
		eqwasMoved___stdZassertions_27((&msg));
		raiseEIO__stdZsyncio_94(blitTmp);
		if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
		{
			LA6_:;
		}
		{
			eqdestroy___stdZassertions_30((&colontmpD__2));
			eqdestroy___stdZassertions_30((&colontmpD_));
			eqdestroy___stdZassertions_30((&msg));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA4_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NI, writeBuffer__stdZsyncio_186)(FILE* f__cJWivIckzpinZ1YWo3Qqyg, void* buffer__pICOptuDPArjVoUUIC2kHg, NI len__wcp55NDbfNN8cddTUpcVZQ) {
	NI result;
	size_t T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	T1_ = (size_t)0;
	T1_ = fwrite(buffer__pICOptuDPArjVoUUIC2kHg, ((size_t)1), ((size_t) (len__wcp55NDbfNN8cddTUpcVZQ)), f__cJWivIckzpinZ1YWo3Qqyg);
	result = ((NI) (T1_));
	checkErr__stdZsyncio_152(f__cJWivIckzpinZ1YWo3Qqyg);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s__UF7MRy5Ww0D3yXFWtooEkw) {
	NCSTRING result;
	result = (NCSTRING)0;
	{
		if (!(s__UF7MRy5Ww0D3yXFWtooEkw.len == ((NI)0))) goto LA3_;
		result = "";
	}
	goto LA1_;
	LA3_: ;
	{
		result = ((NCSTRING) ((*s__UF7MRy5Ww0D3yXFWtooEkw.p).data));
	}
	LA1_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, write__stdZsyncio_238)(FILE* f__Z7W8xxfySxjfgI9aiD9britg, NimStringV2 s__d9cWhBMTIzI9aC3wN9cFAWa6Q) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI T3_;
		T3_ = (NI)0;
		T3_ = writeBuffer__stdZsyncio_186(f__Z7W8xxfySxjfgI9aiD9britg, ((void*) (nimToCStringConv(s__d9cWhBMTIzI9aC3wN9cFAWa6Q))), ((NI) (s__d9cWhBMTIzI9aC3wN9cFAWa6Q.len)));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!!((T3_ == s__d9cWhBMTIzI9aC3wN9cFAWa6Q.len))) goto LA4_;
		raiseEIO__stdZsyncio_94(TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_9);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA4_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, flushFile__stdZsyncio_260)(FILE* f__1Y3grBOIocZcFIX5aVraJA) {
	int T1_;
	T1_ = (int)0;
	T1_ = fflush(f__1Y3grBOIocZcFIX5aVraJA);
	(void)(T1_);
}
N_LIB_PRIVATE N_NIMCALL(void, close__stdZsyncio_251)(FILE* f__CEDjtcBHJC7q5ThfPqiUSQ) {
	{
		int T5_;
		if (!!((f__CEDjtcBHJC7q5ThfPqiUSQ == 0))) goto LA3_;
		T5_ = (int)0;
		T5_ = fclose(f__CEDjtcBHJC7q5ThfPqiUSQ);
		(void)(T5_);
	}
	LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(int, getFileHandle__stdZsyncio_262)(FILE* f__ZqUB4siyMgDrluwd9b9abRmw) {
	int result;
	result = (int)0;
	result = fileno(f__ZqUB4siyMgDrluwd9b9abRmw);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, setInheritable__stdZsyncio_268)(int f__BAsdBRGaSrHINOGMBpuw1Q, NIM_BOOL inheritable__X9amEySujjlF1I85QDZj2ZQ) {
	NIM_BOOL result;
	NI32 colontmpD_;
	NI32 colontmpD__2;
	int flags;
	int T10_;
{	result = (NIM_BOOL)0;
	colontmpD_ = (NI32)0;
	colontmpD__2 = (NI32)0;
	flags = fcntl(f__BAsdBRGaSrHINOGMBpuw1Q, F_GETFD);
	{
		if (!(flags == ((NI32)-1))) goto LA3_;
		result = NIM_FALSE;
		goto BeforeRet_;
	}
	LA3_: ;
	{
		if (!inheritable__X9amEySujjlF1I85QDZj2ZQ) goto LA7_;
		colontmpD_ = (NI32)(flags & (NI32)((NU32) ~(FD_CLOEXEC)));
		flags = colontmpD_;
	}
	goto LA5_;
	LA7_: ;
	{
		colontmpD__2 = (NI32)(flags | FD_CLOEXEC);
		flags = colontmpD__2;
	}
	LA5_: ;
	T10_ = (int)0;
	T10_ = fcntl(f__BAsdBRGaSrHINOGMBpuw1Q, F_SETFD, flags);
	result = !((T10_ == ((NI32)-1)));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(int, getOsFileHandle__stdZsyncio_265)(FILE* f__NN7lHNKcyKqwPXOE59bvcKw) {
	int result;
	result = (int)0;
	result = fileno(f__NN7lHNKcyKqwPXOE59bvcKw);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, open__stdZsyncio_401)(FILE** f__jCZmwmLDt13jv0XqrjcAuQ, NimStringV2 filename__Pf9bBf8k7d9b5DaEF1XeGdbQ, tyEnum_FileMode__39bFZoYF4P1fKMLJ1ev9ch1Q mode__7zsiDlzniTpJK1bQl48ucw, NI bufSize__zibzux2ygo9c1EC9aWjJNryA) {
	NIM_BOOL result;
	void* p;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	p = fopen(nimToCStringConv(filename__Pf9bBf8k7d9b5DaEF1XeGdbQ), FormatOpen__stdZsyncio_392[(mode__7zsiDlzniTpJK1bQl48ucw)- 0]);
	{
		FILE* f2;
		struct stat res;
		if (!!((p == NIM_NIL))) goto LA3_;
		f2 = ((FILE*) (p));
		{
			NIM_BOOL T7_;
			int T8_;
			int T9_;
			T7_ = (NIM_BOOL)0;
			T8_ = (int)0;
			T8_ = getFileHandle__stdZsyncio_262(f2);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			T9_ = (int)0;
			T9_ = fstat(T8_, (&res));
			T7_ = (((NI32)0) <= T9_);
			if (!(T7_)) goto LA10_;
			T7_ = S_ISDIR(res.st_mode);
			LA10_: ;
			if (!T7_) goto LA11_;
			close__stdZsyncio_251(f2);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			result = NIM_FALSE;
			goto BeforeRet_;
		}
		LA11_: ;
		{
			int T15_;
			NIM_BOOL T16_;
			T15_ = (int)0;
			T15_ = getOsFileHandle__stdZsyncio_265(f2);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			T16_ = (NIM_BOOL)0;
			T16_ = setInheritable__stdZsyncio_268(T15_, NIM_FALSE);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			if (!!(T16_)) goto LA17_;
			close__stdZsyncio_251(f2);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			result = NIM_FALSE;
			goto BeforeRet_;
		}
		LA17_: ;
		result = NIM_TRUE;
		(*f__jCZmwmLDt13jv0XqrjcAuQ) = ((FILE*) (p));
		{
			NIM_BOOL T21_;
			int T25_;
			T21_ = (NIM_BOOL)0;
			T21_ = (((NI)0) < bufSize__zibzux2ygo9c1EC9aWjJNryA);
			if (!(T21_)) goto LA22_;
			T21_ = ((NU64)(((NU) (bufSize__zibzux2ygo9c1EC9aWjJNryA))) <= (NU64)(((NU)-1)));
			LA22_: ;
			if (!T21_) goto LA23_;
			T25_ = (int)0;
			T25_ = setvbuf((*f__jCZmwmLDt13jv0XqrjcAuQ), NIM_NIL, _IOFBF, ((size_t) (bufSize__zibzux2ygo9c1EC9aWjJNryA)));
			(void)(T25_);
		}
		goto LA19_;
		LA23_: ;
		{
			int T29_;
			if (!(bufSize__zibzux2ygo9c1EC9aWjJNryA == ((NI)0))) goto LA27_;
			T29_ = (int)0;
			T29_ = setvbuf((*f__jCZmwmLDt13jv0XqrjcAuQ), NIM_NIL, _IONBF, ((size_t)0));
			(void)(T29_);
		}
		goto LA19_;
		LA27_: ;
		LA19_: ;
	}
	LA3_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(FILE*, open__stdZsyncio_465)(NimStringV2 filename__xRu8AEnl3jH9bNwPGLAIHtw, tyEnum_FileMode__39bFZoYF4P1fKMLJ1ev9ch1Q mode__x22y0JMpzDcf8HkpInwvjQ, NI bufSize__ETQ34IA823uFBVhI9ajVvhg) {
	FILE* result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (FILE*)0;
	{
		NIM_BOOL T3_;
		tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g* T6_;
		NimStringV2 T7_;
		T3_ = (NIM_BOOL)0;
		T3_ = open__stdZsyncio_401(&result, filename__xRu8AEnl3jH9bNwPGLAIHtw, mode__x22y0JMpzDcf8HkpInwvjQ, bufSize__ETQ34IA823uFBVhI9ajVvhg);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!!(T3_)) goto LA4_;
		T6_ = NIM_NIL;
		T6_ = (tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g*) nimNewObj(sizeof(tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g), NIM_ALIGNOF(tyObject_IOError__Y9cmhKqJtX29a179a1ftM9cx2g));
		(*T6_).Sup.Sup.Sup.m_type = (&NTIv2__Y9cmhKqJtX29a179a1ftM9cx2g_);
		(*T6_).Sup.Sup.name = "IOError";
		T7_.len = 0; T7_.p = NIM_NIL;
		T7_ = rawNewString(filename__xRu8AEnl3jH9bNwPGLAIHtw.len + 13);
appendString((&T7_), TM__xNF6mvRQ4Pd1hTNM9cEHXwQ_11);
appendString((&T7_), filename__xRu8AEnl3jH9bNwPGLAIHtw);
		(*T6_).Sup.Sup.message = T7_;
		(*T6_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T6_, "IOError", "open", "syncio.nim", 767);
goto BeforeRet_;
	}
	LA4_: ;
	}BeforeRet_: ;
	return result;
}
